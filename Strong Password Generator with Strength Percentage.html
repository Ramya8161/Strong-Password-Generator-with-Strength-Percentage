<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Strong Password Generator with Strength Percentage</title>
<style>
  :root {
    --bg-color: #ffe4c4;
    --text-color: #e0e0e0;
    --primary-color: #007bff;
    --hover-color: #00ced1;
    --accent-color: #00008b;
    --danger-color: #ff4d4d;
    --warning-color: #ffa726;
    --success-color: #66bb6a;
    --gray-color: #555;
  }

  body {
    margin: 40px;
    background-color: var(--bg-color);
    color: var(--text-color);
  }

  h1 {
    text-align: center;
    color: var(--accent-color);
    font-family: Georgia, sans-serif;
    font-style: italic;
  }

  .container {
    max-width: 700px;
    margin: auto;
    padding: 20px;
    background: #1e1e1e;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  }

  button {
    margin-top: 20px;
    padding: 10px 15px;
    font-size: 1em;
    cursor: pointer;
    border: none;
    border-radius: 4px;
    background-color: var(--primary-color);
    color: white;
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: var(--hover-color);
  }

  #passwords {
    margin-top: 20px;
    font-family: monospace;
    white-space: pre-wrap;
    font-size: 1.1em;
    background-color: #333;
    padding: 10px;
    border-radius: 4px;
  }

  .strength-container {
    margin-top: 20px;
    width: 100%;
    height: 25px;
    background-color: var(--gray-color);
    border-radius: 4px;
    overflow: hidden;
  }

  .strength-bar {
    height: 100%;
    width: 0;
    background-color: green;
    transition: width 0.5s, background-color 0.5s;
  }

  #strengthPercentage {
    margin-top: 10px;
    font-weight: bold;
    text-align: center;
    font-family: Lucida Console, sans-serif;
    font-style: italic;
  }
</style>
</head>
<body>

<h1>Strong Password Generator with Strength Percentage</h1>
<div class="container">
  <button id="generateBtn">Generate Passwords</button>
  <div class="strength-container">
    <div id="strengthBar" class="strength-bar"></div>
  </div>
  <div id="strengthPercentage">Strength: 0%</div>
  <div id="passwords"></div>
</div>

<script>
  function promptInput(message) {
    return prompt(message);
  }

  function replaceLetters(str) {
    const replacements = {
      'a': '@', 'A': '@',
      'i': '1', 'I': '1',
      'e': '&', 'E': '&',
      'o': '0', 'O': '0',
      's': '$', 'S': '$',
      't': '7', 'T': '7'
    };
    return str.replace(/[aAiIeEsStT]/g, match => replacements[match] || match);
  }

  function shuffleArray(arr) {
    for (let i=arr.length-1; i>0; i--) {
      const j = Math.floor(Math.random() * (i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function generateVariant(word) {
    let variant = replaceLetters(word);
    variant = variant.split('').map(c => Math.random() > 0.5 ? c.toUpperCase() : c.toLowerCase()).join('');
    return variant;
  }

  function insertSpecialChars(str, count) {
    const specials = ['!', '@', '#', '$', '%', '&', '*'];
    for (let i=0; i<count; i++) {
      const idx = Math.floor(Math.random() * (str.length + 1));
      const char = specials[Math.floor(Math.random() * specials.length)];
      str = str.slice(0, idx) + char + str.slice(idx);
    }
    return str;
  }

  function calculateStrength(password) {
    let score = 0;
    if (password.length >= 8) score++;
    if (/[A-Z]/.test(password)) score++;
    if (/[a-z]/.test(password)) score++;
    if (/[0-9]/.test(password)) score++;
    if (/[^A-Za-z0-9]/.test(password)) score++;
    return score;
  }

  function updateStrengthBar(score) {
    const maxScore = 5;
    const percentage = Math.round((score / maxScore) * 100);
    const bar = document.getElementById('strengthBar');
    const percentageText = document.getElementById('strengthPercentage');
    bar.style.width = percentage + '%';

    // Change color based on strength
    if (percentage <= 40) {
      bar.style.backgroundColor = 'red';
    } else if (percentage <= 80) {
      bar.style.backgroundColor = 'orange';
    } else {
      bar.style.backgroundColor = 'green';
    }
    percentageText.textContent = 'Strength: ' + percentage + '%';
  }

  document.getElementById('generateBtn').addEventListener('click', () => {
    const platform = promptInput("Enter the login platform (e.g., Gmail, Instagram):");
    const lengthStr = promptInput("Enter the required password length:");
    const passwordLength = parseInt(lengthStr);
    if (isNaN(passwordLength) || passwordLength < 8) {
      alert("Please enter a valid number (minimum 8).");
      return;
    }
    const phrasesStr = promptInput("Enter 2-3 words or phrases (separated by commas):");
    const phrases = phrasesStr.split(',').map(p => p.trim()).filter(p => p);
    if (phrases.length < 2 || phrases.length >3) {
      alert("Please enter 2 or 3 phrases.");
      return;
    }

    const passwords = [];
    for (let i=0; i<5; i++) {
      let combined = '';

      // Shuffle phrases for variety
      const shuffled = shuffleArray([...phrases]);

      // Generate variants and combine
      for (let phrase of shuffled) {
        combined += generateVariant(phrase);
      }

      // Add a number for complexity
      combined += Math.floor(Math.random() * 1000);

      // Insert at least 2 special characters
      combined = insertSpecialChars(combined, 2);

      // Adjust length
      if (combined.length > passwordLength) {
        combined = combined.slice(0, passwordLength);
      } else {
        while (combined.length < passwordLength) {
          combined += String.fromCharCode(33 + Math.floor(Math.random() * 94));
        }
      }

      // Ensure at least 2 special characters
      const specialCount = (combined.match(/[^A-Za-z0-9]/g) || []).length;
      if (specialCount < 2) {
        combined = insertSpecialChars(combined, 2 - specialCount);
      }

      passwords.push(combined);
    }

    document.getElementById('passwords').textContent = passwords.join('\n');

    // Calculate strength based on the first password (or any)
    const lastPassword = passwords[0];
    const strengthScore = calculateStrength(lastPassword);
    updateStrengthBar(strengthScore);
  });
</script>

</body>
</html>